<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NOIRÉ Store</title>

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#fff}
header{text-align:center;padding:20px;border-bottom:1px solid #222}
.products{display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));gap:20px;padding:25px}
.card{background:#161616;border-radius:12px;overflow:hidden}

.slider{position:relative}
.slider img, .slider video{
width:100%;height:260px;object-fit:cover;display:none
}
.slider img.active, .slider video.active{display:block}

.dots{text-align:center;padding:5px}
.dot{
height:8px;width:8px;background:#555;border-radius:50%;
display:inline-block;margin:3px;cursor:pointer
}
.dot.active{background:#00ffae}

.info{padding:15px}
.price{color:#00ffae;font-weight:bold}
.desc{font-size:14px;color:#ccc}

button{padding:10px;border:none;border-radius:6px;cursor:pointer;margin-top:6px}
.buyBtn{background:#00ffae;width:100%;font-weight:bold}
.adminBtn{background:#333;color:#fff}

footer{text-align:center;padding:15px;color:#777}

#adminLogin,#adminPanel,#cartBox{
display:none;position:fixed;top:0;left:0;width:100%;height:100%;
background:#0b0b0b;z-index:999;overflow:auto
}
.box{max-width:520px;margin:50px auto;background:#151515;padding:25px;border-radius:12px}
input,textarea{width:100%;padding:10px;margin:6px 0;border-radius:6px;border:none}
.manageItem{border-bottom:1px solid #222;padding:8px 0}
</style>
</head>

<body>

<header>
<h1 id="storeName">NOIRÉ</h1>
<p id="tagline">Minimal • Street • Premium</p>
<button onclick="openAdminLogin()">Admin Panel</button>
</header>

<section class="products" id="productList"></section>
<footer>© 2026 NOIRÉ Clothing</footer>

<!-- CART -->
<div id="cartBox">
<div class="box">
<h2>Cart ❌ <span style="float:right;cursor:pointer" onclick="closeCart()">X</span></h2>
<div id="cartItems"></div>
<button class="buyBtn" onclick="placeOrder()">Order on WhatsApp</button>
</div>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin">
<div class="box">
<h2>Admin Login</h2>
<input type="password" id="adminPass" placeholder="Password">
<button onclick="loginAdmin()">Login</button>
</div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel">
<div class="box">

<h2>Store Settings</h2>
<input id="storeNameInput" placeholder="Store Name">
<input id="taglineInput" placeholder="Tagline">
<button onclick="saveStore()">Save Store</button>

<hr>

<h2>Add Product</h2>
<input id="pName" placeholder="Product Name">
<input id="pPrice" placeholder="Price">
<textarea id="pDesc" placeholder="Description"></textarea>

<h3>Images (optional)</h3>
<input type="file" id="pImgs" multiple accept="image/*">

<h3>Video (optional)</h3>
<input type="file" id="pVideo" accept="video/*">

<button type="button" onclick="saveProduct()">Save Product</button>

<hr>
<h2>Manage Products</h2>
<div id="manageProducts"></div>

<hr>
<button onclick="logoutAdmin()">Logout</button>
</div>
</div>

<script>
const PASSWORD="asmasubhan123";
const WHATSAPP="923322721552";

let products=JSON.parse(localStorage.getItem("products"))||[];
let cart=[];
let isAdmin=localStorage.getItem("isAdmin")==="true";

/* STORE */
function loadStore(){
storeName.innerText=localStorage.getItem("storeName")||"NOIRÉ";
tagline.innerText=localStorage.getItem("tagline")||"Minimal • Street • Premium";
}
function saveStore(){
localStorage.setItem("storeName",storeNameInput.value);
localStorage.setItem("tagline",taglineInput.value);
loadStore(); alert("Saved");
}

/* PRODUCTS */
function renderProducts(){
productList.innerHTML="";
products.forEach((p,i)=>{
let slides="";
let dots="";
let count=0;

p.imgs.forEach(img=>{
slides+=`<img src="${img}" class="${count==0?'active':''}">`;
dots+=`<span class="dot ${count==0?'active':''}" onclick="slide(${i},${count})"></span>`;
count++;
});

if(p.video){
slides+=`<video src="${p.video}" controls></video>`;
dots+=`<span class="dot" onclick="slide(${i},${count})"></span>`;
}

productList.innerHTML+=`
<div class="card">
<div class="slider" id="slider${i}">${slides}</div>
<div class="dots">${dots}</div>
<div class="info">
<h3>${p.name}</h3>
<p class="price">Rs ${p.price}</p>
<p class="desc">${p.desc}</p>
<button class="buyBtn" onclick="addToCart(${i})">Add to Cart</button>
</div>
</div>`;
});
localStorage.setItem("products",JSON.stringify(products));
}

function slide(p,i){
let slides=document.querySelectorAll(`#slider${p} img, #slider${p} video`);
let dots=document.querySelectorAll(`#slider${p} ~ .dots .dot`);
slides.forEach(s=>s.classList.remove("active"));
dots.forEach(d=>d.classList.remove("active"));
slides[i].classList.add("active");
dots[i].classList.add("active");
}

/* SAVE PRODUCT */
function saveProduct(){
if(!pName.value||!pPrice.value||!pDesc.value){
alert("Name, price & description required");return;
}
if(pImgs.files.length===0 && !pVideo.files[0]){
alert("Upload image or video");return;
}

let imgs=[]; let loaded=0;

if(pImgs.files.length>0){
[...pImgs.files].forEach(f=>{
let r=new FileReader();
r.onload=()=>{imgs.push(r.result);loaded++;
if(loaded===pImgs.files.length)handleVideo(imgs);};
r.readAsDataURL(f);
});
}else handleVideo(imgs);

function handleVideo(imgs){
if(pVideo.files[0]){
let vr=new FileReader();
vr.onload=()=>finalSave(imgs,vr.result);
vr.readAsDataURL(pVideo.files[0]);
}else finalSave(imgs,null);
}

function finalSave(imgs,video){
products.push({name:pName.value,price:pPrice.value,desc:pDesc.value,imgs,video});
clearForm(); renderProducts(); renderManage();
}
}

function clearForm(){
pName.value="";pPrice.value="";pDesc.value="";
pImgs.value="";pVideo.value="";
}

/* CART */
function addToCart(i){cart.push(products[i]);openCart();}
function openCart(){
cartBox.style.display="block";cartItems.innerHTML="";
cart.forEach(c=>cartItems.innerHTML+=`${c.name} - Rs ${c.price}<br>`);
}
function closeCart(){cartBox.style.display="none";}
function placeOrder(){
let msg="Order:%0A";
cart.forEach(c=>msg+=`${c.name} - Rs ${c.price}%0A`);
window.open(`https://wa.me/${WHATSAPP}?text=${msg}`,"_blank");
}

/* ADMIN */
function openAdminLogin(){adminLogin.style.display="block";}
function loginAdmin(){
if(adminPass.value===PASSWORD){
localStorage.setItem("isAdmin","true");
adminLogin.style.display="none";
adminPanel.style.display="block";
renderManage();
}else alert("Wrong password");
}
function logoutAdmin(){
localStorage.removeItem("isAdmin");
adminPanel.style.display="none";
}

function renderManage(){
manageProducts.innerHTML="";
products.forEach((p,i)=>{
manageProducts.innerHTML+=`
<div class="manageItem">
${p.name} - Rs ${p.price}
<button class="adminBtn" onclick="deleteProduct(${i})">Delete</button>
</div>`;
});
}
function deleteProduct(i){
if(confirm("Delete?")){
products.splice(i,1);
renderProducts();renderManage();
}
}

/* INIT */
loadStore();renderProducts();
if(isAdmin){adminPanel.style.display="block";renderManage();}
</script>

</body>
</html>
